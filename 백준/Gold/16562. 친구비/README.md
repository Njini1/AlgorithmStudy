# [Gold IV] 친구비 - 16562 

[문제 링크](https://www.acmicpc.net/problem/16562) 

### 성능 요약

메모리: 18996 KB, 시간: 196 ms

### 시간 및 난이도

- 2시간
- 중

### 풀이 리뷰

- 유니온 파인드 코드만 잘 짠다면 어렵지 않은듯
- 유니온 파인드 코드를 잘 못 짜서 한참 헤맴
    - `parent[parentB] = parentA;` 이 코드를 `parent[b] = parentA;` 이런식 으로 짜버림.
- 또 친구 관계가 1 1과 같이 같은 친구가 나올 수 있다는 것을 처리 안 해서 반례 도움 받음
    - `if (f1 != f2)` 친구가 다를 경우만 유니온 파인드로 하도록 변경
- `if (parent[parentA] == parent[parentB]) return;` → 해당 코드를 추가하여 부모 값에 0이 저장 안되도록  변경

### 풀이 키워드

- 유니온 파인드

### 풀이 방법

- 유니온 파인드 하기 전 부모 배열(parent) 을 각각의 인덱스로 초기화하고 친구비 배열(parentPrice)을 각각의 친구비로 저장.
- 친구의 관계에서 각각의 부모값을 얻고(find함수) 그 부모값의 친구비를 비교해서 parent, parentPrice를 저장. 또한 친구의 관계에서 비교할 친구가 다를 경우(f1 ≠ f2) 유니온 파인드를 함.
- 원래의 유니온 파인드는 부모의 값이 큰 것에 작은 것을 저장하는 방식이었다면 약간 변형시켜 친구비가 큰 것에 친구비가 작은 부모값을 저장(parent)함. 친구비가 큰 것은 친구비를 0으로 만들고 친구비가 작은 것은 그대로 둠(parentPrice).

### 시간 복잡도

- **초기화**: O(N)
    
    parent, parentPrice 배열 초기화 및 입력.
    
- **union/find 연산**:
    - `return parent[x] = find(parent[x]);` 사용
        - 경로 압축을 한 find의 시간 복잡도는 O(a(N))이 되는데 여기서 a(N)은 아커만 함수를 의미
    - find: 경로 압축(Path Compression)이 적용되어 있으므로, 한 번의 find 연산은 O(α(N)), 여기서 α는 아커만 함수의 역함수로 거의 상수에 가깝습니다.
    - union: 두 집합의 루트 비교 후 병합. union 연산도 O(α(N)).
- **친구 관계 입력 및 병합**: O(M α(N))
    
    M번 union 연산.
    
- **최소 친구비 합산**: O(N)
    
    모든 parentPrice 배열을 순회.
    
- **전체 시간 복잡도**:
    
    O(N + M α(N) + N) ≈ O(N + M α(N))

### 노션 풀이 링크
https://www.notion.so/16562-215e550432f480fdbe13cc36fcbc3cec

### 분류

그래프 이론, 자료 구조, 그래프 탐색, 분리 집합

### 제출 일자

2025년 6월 18일 14:34:19

### 문제 설명

<p>19학번 이준석은 학생이 N명인 학교에 입학을 했다. 준석이는 입학을 맞아 모든 학생과 친구가 되고 싶어한다. 하지만 준석이는 평생 컴퓨터랑만 대화를 하며 살아왔기 때문에 사람과 말을 하는 법을 모른다. 그런 준석이에게도 희망이 있다. 바로 친구비다!</p>

<p>학생 i에게 <em>A<sub>i</sub></em>만큼의 돈을 주면 그 학생은 1달간 친구가 되어준다! 준석이에게는 총 k원의 돈이 있고 그 돈을 이용해서 친구를 사귀기로 했다. 막상 친구를 사귀다 보면 돈이 부족해질 것 같다는 생각을 하게 되었다. 그래서 준석이는 “친구의 친구는 친구다”를 이용하기로 했다.</p>

<p>준석이는 이제 모든 친구에게 돈을 주지 않아도 된다!</p>

<p>위와 같은 논리를 사용했을 때, 가장 적은 비용으로 모든 사람과 친구가 되는 방법을 구하라.</p>

### 입력 

 <p>첫 줄에 학생 수 N (1 ≤ N ≤ 10,000)과 친구관계 수 M (0 ≤ M ≤ 10,000), 가지고 있는 돈 k (1 ≤ k ≤ 10,000,000)가 주어진다.</p>

<p>두번째 줄에 N개의 각각의 학생이 원하는 친구비 <em>A<sub>i</sub></em>가 주어진다. (1 ≤ <em>A<sub>i</sub></em> ≤ 10,000, 1 ≤ i ≤ N)</p>

<p>다음 M개의 줄에는 숫자 v, w가 주어진다. 이것은 학생 v와 학생 w가 서로 친구라는 뜻이다. 자기 자신과 친구일 수도 있고, 같은 친구 관계가 여러 번 주어질 수도 있다.</p>

### 출력 

 <p>준석이가 모든 학생을 친구로 만들 수 있다면, 친구로 만드는데 드는 최소비용을 출력한다. 만약 친구를 다 사귈 수 없다면, “<code>Oh no</code>”(따옴표 제거)를 출력한다.</p>

